- [c++里的sort函数是怎么实现的？](#c里的sort函数是怎么实现的)
- [cpp异步操作原理，线程池策略](#cpp异步操作原理线程池策略)
- [Python和C++的区别（2）](#python和c的区别2)
- [函数指针是什么，直接用函数名不行吗](#函数指针是什么直接用函数名不行吗)
- [表达式和语句的区别](#表达式和语句的区别)
- [如何让其他文件访问不了本文将的变量，硬要访问呢？](#如何让其他文件访问不了本文将的变量硬要访问呢)
- [两个线程修改一个数，结果是什么（应该想问互斥？](#两个线程修改一个数结果是什么应该想问互斥)
- [代码题：手动实现一个memory allocator](#代码题手动实现一个memory-allocator)
- [cpu绑核的意义，细问对内存和cpu的影响](#cpu绑核的意义细问对内存和cpu的影响)
- [如果你要优化cpp代码，你有什么思路？](#如果你要优化cpp代码你有什么思路)
- [数组使用指针和下标的区别？](#数组使用指针和下标的区别)
- [多线程安全处理](#多线程安全处理)
- [这些都需要深入理解，不能只是八股水平](#这些都需要深入理解不能只是八股水平)
- [std::function 为什么要有function 我主要说了记录函数运行上下文](#stdfunction-为什么要有function-我主要说了记录函数运行上下文)
- [std::bind 这三种你一般在什么场景下使用，闭包用哪个？为什么？](#stdbind-这三种你一般在什么场景下使用闭包用哪个为什么)
- [符号连接 -\>解决符号连接冲突](#符号连接--解决符号连接冲突)
- [new malloc 实现原理 （扩展讲mmap）系统不是所有malloc的块都不回收哦](#new-malloc-实现原理-扩展讲mmap系统不是所有malloc的块都不回收哦)
- [new malloc 实现原理 （扩展讲mmap）系统不是所有malloc的块都不回收哦](#new-malloc-实现原理-扩展讲mmap系统不是所有malloc的块都不回收哦-1)
  - [new malloc区别（2）](#new-malloc区别2)
- [我有一个类文件有一个私有成员，如何在不修改我文件的前提下（友元打咩），访问该成员（2）](#我有一个类文件有一个私有成员如何在不修改我文件的前提下友元打咩访问该成员2)
- [用cpp实现一个互斥锁，写个小demo](#用cpp实现一个互斥锁写个小demo)
- [知不知道strcpy（），用这个库函数需要注意什么](#知不知道strcpy用这个库函数需要注意什么)
- [Lamda表达式介绍一下，在哪儿用过，为什么要使用Lamda表达式？(3)](#lamda表达式介绍一下在哪儿用过为什么要使用lamda表达式3)
- [sizeof一个类的大小(不知道怎么算的)](#sizeof一个类的大小不知道怎么算的)
- [指针常量和常量指针的区别（2）](#指针常量和常量指针的区别2)
- [如何保证线程安全](#如何保证线程安全)
  - [什么是可重入](#什么是可重入)
- [函数式编程](#函数式编程)
- [闭包](#闭包)
- [C++一个函数里可能在多个地方异常返回，这种情况下用C++基本特性如何在返回前知道该函数执行的时间（析构）](#c一个函数里可能在多个地方异常返回这种情况下用c基本特性如何在返回前知道该函数执行的时间析构)
- [C++有哪几种锁](#c有哪几种锁)
  - [锁用过吗？ 我说了睡眠锁和自旋锁的实现](#锁用过吗-我说了睡眠锁和自旋锁的实现)
  - [Cpp 的锁 mutex 是怎么实现的？读锁，写锁，读写锁是什么？](#cpp-的锁-mutex-是怎么实现的读锁写锁读写锁是什么)
  - [互斥锁， 在C++中有对其封装的模板类， 有哪些？](#互斥锁-在c中有对其封装的模板类-有哪些)
  - [你了解读写锁吗](#你了解读写锁吗)
- [C++调试方法，上线之后如何调试](#c调试方法上线之后如何调试)
- [](#)
- [](#-1)
- [C++中面向对象怎么理解](#c中面向对象怎么理解)
  - [三大特性](#三大特性)
  - [重载怎么实现](#重载怎么实现)
  - [重写和重载（3）](#重写和重载3)
- [函数指针](#函数指针)
- [C++异常,(这个不太会, 抛出异常之后会怎样...., 两个异常,子类继承父类.然后想要调用什么什么,记不太清了](#c异常这个不太会-抛出异常之后会怎样-两个异常子类继承父类然后想要调用什么什么记不太清了)
- [Cpp模板template用到了什么头文件（还是template写在什么头文件，不记得了）？](#cpp模板template用到了什么头文件还是template写在什么头文件不记得了)
  - [模板,模板特例化, 多个文件引用模板头文件,模板实例化几次](#模板模板特例化-多个文件引用模板头文件模板实例化几次)
- [cpp java和go的区别？（4）（聊了很多泛型相关）](#cpp-java和go的区别4聊了很多泛型相关)
- [placement new？](#placement-new)
  - [如何在已经申请的内存里new：placement new](#如何在已经申请的内存里newplacement-new)
- [值传递与引用传递](#值传递与引用传递)
- [](#-2)
- [](#-3)
- [野指针](#野指针)
- [动态多态](#动态多态)
- [free一个对象指针 中间发生了什么](#free一个对象指针-中间发生了什么)
- [C++内存泄漏（2）](#c内存泄漏2)
  - [delete \[\]是怎样算出回收的数组的长度的](#delete-是怎样算出回收的数组的长度的)
  - [delete如何判断要删除内容的大小](#delete如何判断要删除内容的大小)
  - [cpp什么时候用delete\[\]](#cpp什么时候用delete)
- [try-catch](#try-catch)
- [C++程序编译的过程](#c程序编译的过程)
- [static关键字在C++程序编译过程的哪个阶段起作用？](#static关键字在c程序编译过程的哪个阶段起作用)
- [构造函数中可以调用虚函数吗？](#构造函数中可以调用虚函数吗)
- [C++运行时存储结构](#c运行时存储结构)
  - [C++内存分布](#c内存分布)
  - [你说到了栈溢出，那什么情况下会栈溢出，你了解吗](#你说到了栈溢出那什么情况下会栈溢出你了解吗)
  - [堆和栈区别（可不可以深入一下？堆和栈其实是一样的）（14）](#堆和栈区别可不可以深入一下堆和栈其实是一样的14)
  - [栈和堆的特点 适用场景](#栈和堆的特点-适用场景)
  - [指针指向堆会发生什么问题](#指针指向堆会发生什么问题)
  - [堆， 堆为什么能用数组表示](#堆-堆为什么能用数组表示)
  - [栈为什么比堆快](#栈为什么比堆快)
  - [为什么要分堆和栈](#为什么要分堆和栈)
  - [线程会有自己独立的栈区吗？会有独立的堆区吗？](#线程会有自己独立的栈区吗会有独立的堆区吗)
  - [进程的内存空间](#进程的内存空间)
  - [管理内存](#管理内存)
  - [内存分配](#内存分配)
  - [cpp内存分区](#cpp内存分区)
  - [如何把对象只分配到栈区](#如何把对象只分配到栈区)
- [内存动态分配 i++和++i的区别](#内存动态分配-i和i的区别)
- [数组名字可以作为指针吗](#数组名字可以作为指针吗)
- [类型转换](#类型转换)
- [C和C++两者各有什么优缺点，分别适合用在什么情况下（4）](#c和c两者各有什么优缺点分别适合用在什么情况下4)
  - [C和C++差别（3）](#c和c差别3)
- [对指针，字符数组求sizeof](#对指针字符数组求sizeof)
- [写一个空类，编译器自动生成了哪些函数（3）](#写一个空类编译器自动生成了哪些函数3)
  - [拷贝构造在哪些情况下不自动生成](#拷贝构造在哪些情况下不自动生成)
- [空类 / 空类继承 / 空基类优化](#空类--空类继承--空基类优化)
- [c++ forward 作用](#c-forward-作用)
- [左值和右值（4）](#左值和右值4)
  - [写一个右值赋值运算符](#写一个右值赋值运算符)
- [完美转发（2）](#完美转发2)
  - [指针和数组的区别](#指针和数组的区别)
- [如何实现memcpy？](#如何实现memcpy)
- [RAII](#raii)
- [迭代器知道吗，实现迭代器++](#迭代器知道吗实现迭代器)
- [智能指针(28)](#智能指针28)
  - [（很熟练了从RAII到autoptr为什么废弃再到shared\_ptr、unique\_ptr，详细介绍了里面的方法和一些注意事项）](#很熟练了从raii到autoptr为什么废弃再到shared_ptrunique_ptr详细介绍了里面的方法和一些注意事项)
  - [智能指针解决内存泄漏问题的原理](#智能指针解决内存泄漏问题的原理)
  - [unique\_ptr智能指针是如何做到独占的](#unique_ptr智能指针是如何做到独占的)
  - [shared\_ptr内部实现的机制](#shared_ptr内部实现的机制)
  - [shared\_ptr计数变量存放位置](#shared_ptr计数变量存放位置)
  - [unique\_ptr和shared\_ptr差异](#unique_ptr和shared_ptr差异)
  - [对unique\_ptr进行std::move()操作](#对unique_ptr进行stdmove操作)
  - [future 智能指针 decltype](#future-智能指针-decltype)
  - [weakptr](#weakptr)
  - [autoptr](#autoptr)
  - [shard\_ptr是线程安全的吗，为什么不保证线程安全](#shard_ptr是线程安全的吗为什么不保证线程安全)
  - [给了一段cpp代码，找出错误。关于智能指针unique\_ptr的：指向新对象后，原来指向的对象会销毁](#给了一段cpp代码找出错误关于智能指针unique_ptr的指向新对象后原来指向的对象会销毁)
  - [给了一段cpp代码，找出错误。关于智能指针unique\_ptr的：指向新对象后，原来指向的对象会销毁](#给了一段cpp代码找出错误关于智能指针unique_ptr的指向新对象后原来指向的对象会销毁-1)
  - [make\_shared和shared\_ptr](#make_shared和shared_ptr)
- [手写shared\_ptr（3）](#手写shared_ptr3)
- [手撕：Unique\_ptr，控制权转移(移动语义）](#手撕unique_ptr控制权转移移动语义)
- [cpp class存储相关以及虚函数](#cpp-class存储相关以及虚函数)
- [手撕：类继承，堆栈上分别代码实现多态](#手撕类继承堆栈上分别代码实现多态)
- [抽象类，虚函数](#抽象类虚函数)
- [A, B类都有虚函数, C继承A和B, , C的大小, C有几个虚指针](#a-b类都有虚函数-c继承a和b--c的大小-c有几个虚指针)
- [多态的底层及原理（23）](#多态的底层及原理23)
  - [虚函数表指针：八股答出来了，给例题判断结果做错了](#虚函数表指针八股答出来了给例题判断结果做错了)
  - [多态 虚函数实现原理](#多态-虚函数实现原理)
  - [一个类空指针可以调用虚函数吗？可以调用普通函数吗？](#一个类空指针可以调用虚函数吗可以调用普通函数吗)
  - [动态绑定和静态绑定区别](#动态绑定和静态绑定区别)
  - [为啥需要虚函数](#为啥需要虚函数)
  - [虚函数可以是内联的吗](#虚函数可以是内联的吗)
  - [纯虚函数（2）](#纯虚函数2)
  - [基类和派生类虚函数表交换会怎么样](#基类和派生类虚函数表交换会怎么样)
  - [静态多态](#静态多态)
- [整形和浮点的存储](#整形和浮点的存储)
  - [浮点数的等0的判断](#浮点数的等0的判断)
- [标准库用到哪些（其实他问的是STL，容器）（超级重点，智能指针同级别）](#标准库用到哪些其实他问的是stl容器超级重点智能指针同级别)
  - [vector,list,map,unordered\_map底层实现](#vectorlistmapunordered_map底层实现)
  - [vector的erase()方法用i++删除会有问题吗](#vector的erase方法用i删除会有问题吗)
  - [vector中push\_back和emplace\_back的区 别](#vector中push_back和emplace_back的区-别)
  - [set和map的理解及使用场景](#set和map的理解及使用场景)
  - [map和unordered\_map的结构及使用场景及区别](#map和unordered_map的结构及使用场景及区别)
  - [vector内存扩容机制（vector扩容策略，1.5倍扩容 为什么比2倍好）](#vector内存扩容机制vector扩容策略15倍扩容-为什么比2倍好)
  - [怎么降低扩容次数(reserve,resize)](#怎么降低扩容次数reserveresize)
  - [](#-4)
  - [STL sort 为什么可以避免爆栈（？不会），递归如何避免爆栈](#stl-sort-为什么可以避免爆栈不会递归如何避免爆栈)
  - [map为什么使用红黑树，与AVL有什么区别，为什么不用AVL实现？](#map为什么使用红黑树与avl有什么区别为什么不用avl实现)
  - [vector为什么可以随机访问](#vector为什么可以随机访问)
  - [vector底层数组大小分配](#vector底层数组大小分配)
  - [vector，list，map，set等STL容器相关](#vectorlistmapset等stl容器相关)
  - [vector扩容后缩减（临时变量+swap，当时没想到swap）](#vector扩容后缩减临时变量swap当时没想到swap)
  - [STL中的优先队列的实现](#stl中的优先队列的实现)
- [C++特性（11）](#c特性11)
  - [C++11的特性 （12）](#c11的特性-12)
  - [do{...}while(0)](#dowhile0)
  - [auto](#auto)
  - [auto\&](#auto-1)
  - [auto \&\&](#auto-)
  - [stl](#stl)
  - [函数的重入](#函数的重入)
- [构造函数构造的顺序，析构的顺序（3）](#构造函数构造的顺序析构的顺序3)
  - [移动构造函数](#移动构造函数)
  - [成员对象构造顺序](#成员对象构造顺序)
  - [RAII基于什么实现的（2）](#raii基于什么实现的2)
  - [引用对于内置类型和由内置类型构造的struct有什么区别](#引用对于内置类型和由内置类型构造的struct有什么区别)
  - [构造函数和析构函数可以是虚函数吗](#构造函数和析构函数可以是虚函数吗)
  - [构造函数里面可以调虚函数吗](#构造函数里面可以调虚函数吗)
  - [三个类A, B, C, B继承A， C继承B， 一个C的对象， 他的构造顺序， 和析构顺序](#三个类a-b-c-b继承a-c继承b-一个c的对象-他的构造顺序-和析构顺序)
  - [什么时候吧类的析构函数写成虚函数， 为什么， 哪块内存会泄露？ 我：子类对象的会泄露， 面试官：确定吗？ 他说是基类的内存会泄露](#什么时候吧类的析构函数写成虚函数-为什么-哪块内存会泄露-我子类对象的会泄露-面试官确定吗-他说是基类的内存会泄露)
  - [什么时候吧类的析构函数写成虚函数， 为什么， 哪块内存会泄露？ 我：子类对象的会泄露， 面试官：确定吗？ 他说是基类的内存会泄露](#什么时候吧类的析构函数写成虚函数-为什么-哪块内存会泄露-我子类对象的会泄露-面试官确定吗-他说是基类的内存会泄露-1)
- [深拷贝和浅拷贝](#深拷贝和浅拷贝)
- [inline内联函数，和#define区别（5）](#inline内联函数和define区别5)
- [struct和union](#struct和union)
- [结构体内存对齐（3）](#结构体内存对齐3)
- [结构体和类的区别（2）](#结构体和类的区别2)
- [c++类的对象大小由什么决定](#c类的对象大小由什么决定)
- [影响 C++ class 类的大小的因素有哪些？（2）](#影响-c-class-类的大小的因素有哪些2)
  - [类的大小，比如空类这种](#类的大小比如空类这种)
  - [类的大小，比如空类这种](#类的大小比如空类这种-1)
  - [继承过程中的一些处理，比如虚拟继承、虚函数；重载、重写、重定义](#继承过程中的一些处理比如虚拟继承虚函数重载重写重定义)
- [](#-5)
- [c和c++结构体有啥区别](#c和c结构体有啥区别)
- [看代码2：关于虚析构函数和内存泄露问题](#看代码2关于虚析构函数和内存泄露问题)
- [看代码1：关于子类继承，构造函数的问题](#看代码1关于子类继承构造函数的问题)
  - [看代码3：和1类似的知识点](#看代码3和1类似的知识点)

# c++里的sort函数是怎么实现的？

# cpp异步操作原理，线程池策略

# Python和C++的区别（2）

（类型动静态，编译和解释，语法，python适合快速原型开发，数据科学，机器学习，C++适合高性能，底层控制，操作系统，嵌入式

对于python和cpp可移植性的看法（看我两个都用过）

# 函数指针是什么，直接用函数名不行吗

（一个指向函数的指针，用来动态调用函数，回调，动态库加载，事件处理，直接调用的话，控制权转移到函数内部，执行完再返回

# 表达式和语句的区别

（表达式时一个计算，语句时一系列指令和操作的组合，表达式为操作数和运算符组成，比如“5+3”，语句用来执行任务，比如int a = 5;

# 如何让其他文件访问不了本文将的变量，硬要访问呢？

（static限制其他文件访问不了当前文件的，但可以用extern引入static变量

# 两个线程修改一个数，结果是什么（应该想问互斥？

（std::mutex的lock和unlock

# 代码题：手动实现一个memory allocator

# cpu绑核的意义，细问对内存和cpu的影响

# 如果你要优化cpp代码，你有什么思路？

比较懵的，当时说尽可能将代码更改为编译期执行而非运行期，比如constexpr if将分支判断从运行期修改为编译期。（现在想想其实还有很多）

# 数组使用指针和下标的区别？

（因为有很多相关知识，我回答了挺多，比如数组作为形参会退化为指针，指针不会有越界可能会访问非法地址，下标好像也会？但是stl里面类似于vector可以使用at方法去访问，越界的时候会有异常处理）

# 多线程安全处理

# 这些都需要深入理解，不能只是八股水平

# std::function 为什么要有function 我主要说了记录函数运行上下文

# std::bind 这三种你一般在什么场景下使用，闭包用哪个？为什么？

# 符号连接 ->解决符号连接冲突

# new malloc 实现原理 （扩展讲mmap）系统不是所有malloc的块都不回收哦

# new malloc 实现原理 （扩展讲mmap）系统不是所有malloc的块都不回收哦

## new malloc区别（2）

# 我有一个类文件有一个私有成员，如何在不修改我文件的前提下（友元打咩），访问该成员（2）

为什么要这么做，C++ 为什么要有这个，这个不是破坏了封装吗

# 用cpp实现一个互斥锁，写个小demo

我写的10个线程的add；

问一个问题，如果你的那个“result++”不是简单的变量加一而是一个比较复杂的操作，有可能导致这个锁不会被释放，或者说出现一些异常情况，或者说我就执行的中途退出了，没有释放这个锁，怎么办？

不太会，我瞎说了什么try escape或者assert避免异常

第三题应该是想问你RAII，通过析构函数确保锁被释放，这样无论是什么错误，它只要到生命周期的结尾就会调用析构函数，所以确保了锁被释放
第三题应该是想问你RAII，通过析构函数确保锁被释放，这样无论是什么错误，它只要到生命周期的结尾就会调用析构函数，所以确保了锁被释放

<https://www.nowcoder.com/discuss/463508738524172288?sourceSSR=search>
<https://www.nowcoder.com/discuss/463508738524172288?sourceSSR=search>

# 知不知道strcpy（），用这个库函数需要注意什么

# Lamda表达式介绍一下，在哪儿用过，为什么要使用Lamda表达式？(3)

# sizeof一个类的大小(不知道怎么算的)

# 指针常量和常量指针的区别（2）

const int *与int* const
const int *与int* const

# 如何保证线程安全

## 什么是可重入

# 函数式编程

# 闭包

# C++一个函数里可能在多个地方异常返回，这种情况下用C++基本特性如何在返回前知道该函数执行的时间（析构）

# C++有哪几种锁

## 锁用过吗？ 我说了睡眠锁和自旋锁的实现

## Cpp 的锁 mutex 是怎么实现的？读锁，写锁，读写锁是什么？

## 互斥锁， 在C++中有对其封装的模板类， 有哪些？

lock_guard, unique_guard, socped_lock等等

## 你了解读写锁吗

# C++调试方法，上线之后如何调试

#

#

# C++中面向对象怎么理解

## 三大特性

封装，继承，多态

## 重载怎么实现

## 重写和重载（3）

你知道原理吗， 编译器是如何识别出两个函数是不同的

吧多个重载的函数编写到动态库中， 编译器是如何判断两个函数

加const,常函数算不算重载, 在常成员函数中改变一个变量(不会,用mutable)

# 函数指针

 用一个函数指针指向成员函数(多出来this参数...卡住了, 面试官说函数指针加作用域就行了

# C++异常,(这个不太会, 抛出异常之后会怎样...., 两个异常,子类继承父类.然后想要调用什么什么,记不太清了

# Cpp模板template用到了什么头文件（还是template写在什么头文件，不记得了）？

## 模板,模板特例化, 多个文件引用模板头文件,模板实例化几次

# cpp java和go的区别？（4）（聊了很多泛型相关）

面试官提醒内存管理，然后说到new和malloc，brk，问内存池寄了，反问的时候面试官说希望听碎片管理和线程安全的东西，下来看了一下确实很受用

# placement new？

placement new是在从前申请的空间放数据，使用这个不用申请新空间

这个是原地new，其实new关键字第一步是分配空间，第二步就是在分配的空间上面执行这个原地new，原地new不开辟空间，就是单纯的在这个空间上面执行构造函数。有意思的是可以在栈空间上面执行这个操作来创建对象hh

## 如何在已经申请的内存里new：placement new

# 值传递与引用传递

#

#

# 野指针

# 动态多态

# free一个对象指针 中间发生了什么

# C++内存泄漏（2）

排查内存泄漏

## delete []是怎样算出回收的数组的长度的

## delete如何判断要删除内容的大小

## cpp什么时候用delete[]

# try-catch

# C++程序编译的过程

# static关键字在C++程序编译过程的哪个阶段起作用？

这个真没看过，不过运气好猜到了是在链接阶段，之后看看材料）

# 构造函数中可以调用虚函数吗？

（可以调但是一般达不到目的，一开始答对了，但后面追问结果答错了）

# C++运行时存储结构

## C++内存分布

你提到了 .stack，这只是编译器搞得内存吗，你不能在代码里处理吗？

如果在 .stack 中定义某个很大的对象，这可以吗

## 你说到了栈溢出，那什么情况下会栈溢出，你了解吗

你有了解在哪个数值上会溢出吗，比如你的栈设置了 1K，2K，1M，2M，这样

## 堆和栈区别（可不可以深入一下？堆和栈其实是一样的）（14）

栈是操作系统管理，地址连续，堆由程序员管理，地址不连续，管理不好内存泄漏。

，我跟他扯内存空间布局，他问我为啥栈要放在最顶端，从最顶端地址向下增。。。。我说堆尽量往低地址放 ，栈尽量往高地址放，这样中间空出来的空间才多，两者不容易装上，可用的空间更大

（还提到了一个所谓的动态栈？）

## 栈和堆的特点 适用场景

## 指针指向堆会发生什么问题

## 堆， 堆为什么能用数组表示

## 栈为什么比堆快

## 为什么要分堆和栈

## 线程会有自己独立的栈区吗？会有独立的堆区吗？

## 进程的内存空间

## 管理内存

## 内存分配

## cpp内存分区

## 如何把对象只分配到栈区

# 内存动态分配 i++和++i的区别

# 数组名字可以作为指针吗

# 类型转换

# C和C++两者各有什么优缺点，分别适合用在什么情况下（4）

```c++
int fun()  
{ 
   int* a=malloc(sizeof(int));  
 return *a; 
{ 
   int* a=malloc(sizeof(int));  
 return *a; 
}
问返回值是多少，这段代码有啥问题
```

## C和C++差别（3）

# 对指针，字符数组求sizeof

# 写一个空类，编译器自动生成了哪些函数（3）

## 拷贝构造在哪些情况下不自动生成

# 空类 / 空类继承 / 空基类优化

# c++ forward 作用

# 左值和右值（4）

右值引用 ：好不容易遇到个cpp的，我就从引入引用解决了什么问题，介绍了一下std::move() 和 完美转发是如何实现的（话说每次面这个题，我都想手写一下），还说了一下完美转发失败的场景。

左值右值,i++ ++i哪个是左值哪个是右值

## 写一个右值赋值运算符

# 完美转发（2）

干啥的

就是右值通过传参进函数的时候，就不是右值了，就会成为左值，这就要通过forward让他保持原来的右值性质，就是完美转发。

## 指针和数组的区别

# 如何实现memcpy？

常规的思路有什么问题（从头开始复制） 如何解决？ 答案：从后面往前面的顺序复制数据

# RAII

# 迭代器知道吗，实现迭代器++

# 智能指针(28)

对智能指针的理解 重点讲讲shared_ptr weak_ptr之间的关系

面试官实际想问`unique_ptr,share_ptr`，我提了一嘴之前还有`auto_ptr`，后来弃用了，然后分别说了一下`unique_ptr,share_ptr`，之后说到`share_ptr`的循环引用问题，又介绍了用于解决循环引用问题的`weak_ptr`。

常用的智能指针

## （很熟练了从RAII到autoptr为什么废弃再到shared_ptr、unique_ptr，详细介绍了里面的方法和一些注意事项）

## 智能指针解决内存泄漏问题的原理

## unique_ptr智能指针是如何做到独占的

## shared_ptr内部实现的机制

## shared_ptr计数变量存放位置

## unique_ptr和shared_ptr差异

## 对unique_ptr进行std::move()操作

## future 智能指针 decltype

## weakptr

一个是 shared_ptr，一个是 weak_ptr，它们的区别和使用场景

我们一般不会发生循环引用，weak_ptr 那还有什么使用场景

## autoptr

## shard_ptr是线程安全的吗，为什么不保证线程安全

## 给了一段cpp代码，找出错误。关于智能指针unique_ptr的：指向新对象后，原来指向的对象会销毁

## 给了一段cpp代码，找出错误。关于智能指针unique_ptr的：指向新对象后，原来指向的对象会销毁

## make_shared和shared_ptr

# 手写shared_ptr（3）

智能指针 稍微手写了一下shard_ptr 有锁版  遇到这个题我还会扩展的聊一下 weak_ptr 的lock 如何实现的，和详细聊一下shard底层实现（然后有个面官问我这是你的优化吗，我说是我看源码的个人分析）

# 手撕：Unique_ptr，控制权转移(移动语义）

# cpp class存储相关以及虚函数

# 手撕：类继承，堆栈上分别代码实现多态

# 抽象类，虚函数

# A, B类都有虚函数, C继承A和B, , C的大小, C有几个虚指针

# 多态的底层及原理（23）

静态多态，动态多态，继承，虚函数，重写，父类指针/引用指向子类对象，虚函数表，虚表指针，派生类虚表，纯虚函数，抽象类。本来还想说一下虚析构，协变，为什么没有虚构造，但是感觉说得不少了，就没说了。`override`跟`final`倒是没想起来。

## 虚函数表指针：八股答出来了，给例题判断结果做错了

## 多态 虚函数实现原理

虚函数表是什么（2）

为了实现C++的多态，C++使用了一种动态绑定的技术。这个技术的核心是虚函数表（下文简称虚表）。每个包含了虚函数的类都包含一个虚表。  

   我们知道，当一个类（A）继承另一个类（B）时，类A会继承类B的函数的调用权。所以如果一个基类包含了虚函数，那么其继承类也可调用这些虚函数，换句话说，一个类继承了包含虚函数的基类，那么这个类也拥有自己的虚表。  我们来看以下的代码。类A包含虚函数vfunc1，vfunc2，由于类A包含虚函数，故类A拥有一个虚表。  

   那么，什么时候会执行函数的动态绑定？这需要符合以下三个条件。  

- ​    通过指针来调用函数
- ​    指针upcast向上转型（继承类向基类的转换称为upcast，关于什么是upcast，可以参考本文的参考资料）
- ​    调用的是虚函数
- ​    通过指针来调用函数
- ​    指针upcast向上转型（继承类向基类的转换称为upcast，关于什么是upcast，可以参考本文的参考资料）
- ​    调用的是虚函数

   如果一个函数调用符合以上三个条件，编译器就会把该函数调用编译成动态绑定，其函数的调用过程走的是上述通过虚表的机制。

## 一个类空指针可以调用虚函数吗？可以调用普通函数吗？

## 动态绑定和静态绑定区别

## 为啥需要虚函数

## 虚函数可以是内联的吗

## 纯虚函数（2）

## 基类和派生类虚函数表交换会怎么样

## 静态多态

# 整形和浮点的存储

## 浮点数的等0的判断

# 标准库用到哪些（其实他问的是STL，容器）（超级重点，智能指针同级别）

## vector,list,map,unordered_map底层实现

## vector的erase()方法用i++删除会有问题吗

## vector中push_back和emplace_back的区 别

## set和map的理解及使用场景

map， 指定一个key， 我需要用for删掉这个key，需要注意什么

## map和unordered_map的结构及使用场景及区别

1. 细问了unordered_map哈希是怎么实现的，我不知道，只答了一般哈希表可以用链表解决冲突

## vector内存扩容机制（vector扩容策略，1.5倍扩容 为什么比2倍好）

我说数组。自动扩容，然后我自作主张说  一个vector，当它的数组大概装满2/3左右就会扩容，当数组元素少于1/3的时候回自动缩容（其实我没剖析过stl源码，我不太确定是否真是这样。。。。。），然后面试官顺着我的话问我，为啥装到２／３左右就开始扩容，而不是等数组装满了，已经完全装不下了再扩容。。。。我确实没想过这问题，不知道答案。。我的回答是：从理性分析的角度出发，我不知道为啥。。。感性的说，这叫未雨绸缪。。。。。然后他说ｏｋｏｋ就下一个问题了

## 怎么降低扩容次数(reserve,resize)

它俩的区别

##

## STL sort 为什么可以避免爆栈（？不会），递归如何避免爆栈

## map为什么使用红黑树，与AVL有什么区别，为什么不用AVL实现？

## vector为什么可以随机访问

## vector底层数组大小分配

## vector，list，map，set等STL容器相关

## vector扩容后缩减（临时变量+swap，当时没想到swap）

## STL中的优先队列的实现

# C++特性（11）

## C++11的特性 （12）

用过哪些（项目里面）

11 新特性后 STL 有啥变化？举个例子，比如 vector 有啥新操作？

## do{...}while(0)

## auto

## auto&

## auto &&

## stl

## 函数的重入

# 构造函数构造的顺序，析构的顺序（3）

（先基类，再成员对象，再自己

## 移动构造函数

## 成员对象构造顺序

（声明顺序，不是构造函数中的调用顺序

## RAII基于什么实现的（2）

（生命周期、作用域、构造析构

## 引用对于内置类型和由内置类型构造的struct有什么区别

## 构造函数和析构函数可以是虚函数吗

## 构造函数里面可以调虚函数吗

## 三个类A, B, C, B继承A， C继承B， 一个C的对象， 他的构造顺序， 和析构顺序

## 什么时候吧类的析构函数写成虚函数， 为什么， 哪块内存会泄露？ 我：子类对象的会泄露， 面试官：确定吗？ 他说是基类的内存会泄露

## 什么时候吧类的析构函数写成虚函数， 为什么， 哪块内存会泄露？ 我：子类对象的会泄露， 面试官：确定吗？ 他说是基类的内存会泄露

# 深拷贝和浅拷贝

# inline内联函数，和#define区别（5）

# struct和union

# 结构体内存对齐（3）

# 结构体和类的区别（2）

struct class区别，上个假期看过Lippmann的《深入理解C++对象模型》，有点印象，跟他扯。说class是struct的完全上位替代，struct完全可以抛弃，留着它只是为了和c兼容讲了下class为何更好，说了下封装之类东西，，，不知道扯啥好。。开始分析两者内存布局异同。我说大部分情况下struct class内存布局一样，除了class有虚函数的时候，于是开始扯虚函数，虚函数表，虚指针，含虚函数的class内存布局和不含虚函数class内存布局区别。他问了一下一个含虚函数的类的对象啥时候初始化虚指针。。。当时脑抽没答出来。。应该是调用构造函数初始化的时候嘛。。。

# c++类的对象大小由什么决定

# 影响 C++ class 类的大小的因素有哪些？（2）

内存对齐会有影响吗？

## 类的大小，比如空类这种

## 类的大小，比如空类这种

## 继承过程中的一些处理，比如虚拟继承、虚函数；重载、重写、重定义

#

# c和c++结构体有啥区别

# 看代码2：关于虚析构函数和内存泄露问题

# 看代码1：关于子类继承，构造函数的问题

## 看代码3：和1类似的知识点
